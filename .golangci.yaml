version: "2"
run:
  concurrency: 8
  issues-exit-code: 1
  tests: true
  allow-parallel-runners: false
output:
  formats:
    text:
      path: stdout
      print-linter-name: true
      print-issued-lines: true
  path-prefix: ""
linters:
  default: all
  disable:
    - dupl
    - err113
    - errchkjson
    - exhaustruct
    - forbidigo
    - gochecknoglobals
    - godox
    - goheader
    - gomoddirectives
    - gomodguard
    - gosmopolitan
    - importas
    - ireturn
    # - mnd
    - musttag
    - nonamedreturns
    - paralleltest
    - perfsprint
    - thelper
  settings:
    asasalint:
      exclude:
        - Append
        - \.Wrapf
      use-builtin-exclusions: false
    bidichk:
      left-to-right-embedding: false
      right-to-left-embedding: false
      pop-directional-formatting: false
      left-to-right-override: false
      right-to-left-override: false
      left-to-right-isolate: false
      right-to-left-isolate: false
      first-strong-isolate: false
      pop-directional-isolate: false
    copyloopvar:
      check-alias: true
    cyclop:
      max-complexity: 10
      package-average: 6
    decorder:
      dec-order:
        - const
        - type
        - var
        - func
      disable-dec-num-check: true
      disable-dec-order-check: false
      disable-init-func-first-check: false
    depguard:
      rules:
        main:
          files:
            - $all
            - '!$test'
          allow:
            - $gostd
            - dev.local/marcelloh
            - github.com/marcelloh/fastdb
            - github.com/a-h/templ
            - github.com/aead/chacha20poly1305
            - github.com/bytedance/sonic
            - github.com/google/uuid
            - github.com/icza/session
            - github.com/jmoiron/sqlx
            - github.com/knadh/koanf
            - github.com/lmittmann/tint
            - github.com/ncruces/go-sqlite3/driver
            - github.com/ncruces/go-sqlite3/embed
            - github.com/nutsdb/nutsdb
            - github.com/plandem/xlsx
            - github.com/sugawarayuuta/sonnet
            - github.com/tidwall/buntdb
            - github.com/tidwall/gjson
            - github.com/uptrace/bunrouter
            - github.com/vk-rv/pvx
          deny:
            - pkg: github.com/sirupsen/logrus
              desc: not allowed - logging is allowed only by logutils.Log
            - pkg: github.com/pkg/errors
              desc: Should be replaced by standard lib errors package
    dogsled:
      max-blank-identifiers: 2
    dupl:
      threshold: 600
    dupword:
      keywords:
        - the
        - and
        - a
    errcheck:
      disable-default-exclusions: true
      check-type-assertions: true
      check-blank: false
      exclude-functions:
        - io/ioutil.ReadFile
        - io.Copy(*bytes.Buffer)
        - io.Copy(os.Stdout)
        - fmt.Print
        - fmt.Printf
        - fmt.Println
    errchkjson:
      check-error-free-encoding: true
      report-no-exported: false
    errorlint:
      errorf: true
      asserts: false
      comparison: false
    exhaustive:
      check:
        - switch
        - map
      default-signifies-exhaustive: false
      ignore-enum-members: Example.+
      ignore-enum-types: Example.+
      package-scope-only: true
      explicit-exhaustive-map: true
      explicit-exhaustive-switch: true
    forbidigo:
      forbid:
        - pattern: ^print.*$
        - pattern: fmt\.Print.*
        - pattern: fmt\.Print.*(# Do not commit print statements\.)?
    funlen:
      lines: 60
      statements: 45
    ginkgolinter:
      suppress-len-assertion: true
      suppress-nil-assertion: true
      suppress-err-assertion: true
    gocognit:
      min-complexity: 10
    goconst:
      match-constant: false
      min-len: 3
      min-occurrences: 10
      numbers: true
      min: 2
      max: 2
      ignore-calls: false
    gocritic:
      enabled-tags:
        - diagnostic
        - style
        - performance
        - experimental
        - opinionated
      settings:
        captLocal:
          paramsOnly: false
        elseif:
          skipBalanced: false
        hugeParam:
          sizeThreshold: 70
        nestingReduce:
          bodyWidth: 4
        rangeExprCopy:
          sizeThreshold: 516
          skipTestFuncs: false
        rangeValCopy:
          sizeThreshold: 32
          skipTestFuncs: false
        ruleguard:
          debug: emptyDecl
          disable: ""
          enable: <all>
          failOn: dsl
          failOnError: false
        tooManyResultsChecker:
          maxResults: 10
        truncateCmp:
          skipArchDependent: false
        underef:
          skipRecvDeref: false
        unnamedResult:
          checkExported: true
    gocyclo:
      min-complexity: 10
    godot:
      scope: toplevel
      exclude:
        - '^fixme:'
        - '^todo:'
      capital: true
      period: false
    goheader:
      values:
        const:
          COMPANY: MY COMPANY
        regexp:
          AUTHOR: .*@mycompany\.com
      template: |-
        # Put here copyright header template for source code files
        # For example:
        # Note: {{ YEAR }} is a builtin value that returns the year relative to the current machine time.
        #
        # {{ AUTHOR }} {{ COMPANY }} {{ YEAR }}
        # SPDX-License-Identifier: Apache-2.0

        # Licensed under the Apache License, Version 2.0 (the "License");
        # you may not use this file except in compliance with the License.
        # You may obtain a copy of the License at:

        #   http://www.apache.org/licenses/LICENSE-2.0

        # Unless required by applicable law or agreed to in writing, software
        # distributed under the License is distributed on an "AS IS" BASIS,
        # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        # See the License for the specific language governing permissions and
        # limitations under the License.
    gomoddirectives:
      replace-allow-list:
        - launchpad.net/gocheck
      replace-local: false
      exclude-forbidden: false
      retract-allow-no-explanation: false
    gomodguard:
      blocked:
        modules:
          - github.com/golang/protobuf:
              recommendations:
                - google.golang.org/protobuf
              reason: see https://developers.google.com/protocol-buffers/docs/reference/go/faq#modules
          - github.com/satori/go.uuid:
              recommendations:
                - github.com/google/uuid
              reason: satori's package is not maintained
          - github.com/gofrs/uuid:
              recommendations:
                - github.com/google/uuid
              reason: 'see recommendation from dev-infra team: https://confluence.gtforge.com/x/gQI6Aw'
        local-replace-directives: true
    gosec:
      severity: medium
      confidence: medium
    govet:
      enable:
        - nilness
        - shadow
      settings:
        printf:
          funcs:
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Infof
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Warnf
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Errorf
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Fatalf
    grouper:
      const-require-single-const: false
      const-require-grouping: false
      import-require-single-import: true
      import-require-grouping: false
      type-require-single-type: false
      type-require-grouping: false
      var-require-single-var: false
      var-require-grouping: false
    importas:
      alias:
        - pkg: knative.dev/serving/pkg/apis/serving/v1
          alias: servingv1
        - pkg: knative.dev/serving/pkg/apis/autoscaling/v1alpha1
          alias: autoscalingv1alpha1
        - pkg: knative.dev/serving/pkg/apis/(\w+)/(v[\w\d]+)
          alias: $1$2
      no-unaliased: false
      no-extra-aliases: true
    interfacebloat:
      max: 9
    ireturn:
      allow:
        - anon
        - error
        - empty
        - stdlib
        - (or|er)$
      reject:
        - github.com\/user\/package\/v4\.Type
    lll:
      line-length: 135
      tab-width: 1
    maintidx:
      under: 10
    makezero:
      always: false
    misspell:
      locale: UK
      ignore-rules:
        - catalogs
        - catalog
        - Color
    mnd:
      checks:
        - argument
        - case
        - condition
        - operation
        - return
        - assign
      ignored-numbers:
        - "2"
        - "3"
        - "5"
        - "10"
        - "51"
        - "64"
        - "0600"
        - "0666"
    nakedret:
      max-func-lines: 30
    nestif:
      min-complexity: 4
    nilnil:
      checked-types:
        - ptr
        - func
        - iface
        - chan
    nlreturn:
      block-size: 3
    nolintlint:
      require-explanation: true
      require-specific: true
      allow-unused: false
    nonamedreturns:
      report-error-in-defer: true
    paralleltest:
      ignore-missing: true
    prealloc:
      simple: true
      range-loops: true
      for-loops: true
    predeclared:
      ignore:
        - new
        - int
      qualified-name: true
    promlinter:
      strict: true
      disabled-linters:
        - Help
        - MetricUnits
        - Counter
        - HistogramSummaryReserved
        - MetricTypeInName
        - ReservedChars
        - CamelCase
        - UnitAbbreviations
    reassign:
      patterns:
        - .*
    revive:
      max-open-files: 2048
      confidence: 0.1
      severity: error
      enable-all-rules: true
      rules:
        - name: add-constant
          arguments:
            - allowFloats: 0.0,0.,1.0,1.,2.0,2.
              allowInts: 0,1,2,3,4,5,6,10,60,600
              allowStrs: '"%v","","\n"'
              maxLitCount: "5"
          severity: warning
          disabled: false
        - name: argument-limit
          arguments:
            - 6
          severity: warning
          disabled: false
        - name: atomic
          severity: warning
          disabled: false
        - name: banned-characters
          arguments:
            - Ω
            - Σ
            - σ
          severity: warning
          disabled: false
        - name: bare-return
          severity: warning
          disabled: false
        - name: blank-imports
          severity: warning
          disabled: false
        - name: bool-literal-in-expr
          severity: warning
          disabled: false
        - name: call-to-gc
          severity: warning
          disabled: false
        - name: cognitive-complexity
          arguments:
            - 10
          severity: warning
          disabled: false
        - name: confusing-naming
          severity: warning
          disabled: false
        - name: confusing-results
          severity: warning
          disabled: false
        - name: comment-spacings
          arguments:
            - nolint
          severity: warning
          disabled: false
        - name: constant-logical-expr
          severity: warning
          disabled: false
        - name: context-as-argument
          arguments:
            - allowTypesBefore: '*testing.T,*github.com/user/repo/testing.Harness'
          severity: warning
          disabled: false
        - name: context-keys-type
          severity: warning
          disabled: false
        - name: cyclomatic
          arguments:
            - 10
          severity: warning
          disabled: false
        - name: datarace
          severity: warning
          disabled: false
        - name: deep-exit
          severity: warning
          disabled: true
        - name: defer
          arguments:
            - - loop
          severity: warning
          disabled: false
        - name: dot-imports
          severity: warning
          disabled: false
        - name: duplicated-imports
          severity: warning
          disabled: false
        - name: early-return
          severity: warning
          disabled: false
        - name: empty-block
          severity: warning
          disabled: false
        - name: empty-lines
          severity: warning
          disabled: false
        - name: error-naming
          severity: warning
          disabled: false
        - name: error-return
          severity: warning
          disabled: false
        - name: error-strings
          severity: warning
          disabled: true
        - name: errorf
          severity: warning
          disabled: false
        - name: exported
          arguments:
            - checkPrivateReceivers
            - sayRepetitiveInsteadOfStutters
          severity: warning
          disabled: false
        - name: file-header
          arguments:
            - This is the text that must appear at the top of source files.
          severity: warning
          disabled: true
        - name: flag-parameter
          severity: warning
          disabled: true
        - name: function-result-limit
          arguments:
            - 3
          severity: warning
          disabled: false
        - name: function-length
          arguments:
            - 45
            - 60
          severity: warning
          disabled: false
        - name: get-return
          severity: warning
          disabled: true
        - name: identical-branches
          severity: warning
          disabled: false
        - name: if-return
          severity: warning
          disabled: false
        - name: increment-decrement
          severity: warning
          disabled: false
        - name: indent-error-flow
          severity: warning
          disabled: false
        - name: import-alias-naming
          arguments:
            - ^[a-z][a-zA-Z0-9]*$
        - name: imports-blacklist
          arguments:
            - crypto/md5
            - crypto/sha1
          severity: warning
          disabled: false
        - name: import-shadowing
          severity: warning
          disabled: false
        - name: line-length-limit
          arguments:
            - 135
          severity: warning
          disabled: false
        - name: max-public-structs
          arguments:
            - 4
          severity: warning
          disabled: true
        - name: modifies-parameter
          severity: warning
          disabled: true
        - name: modifies-value-receiver
          severity: warning
          disabled: false
        - name: nested-structs
          severity: warning
          disabled: false
        - name: optimize-operands-order
          severity: warning
          disabled: true
        - name: package-comments
          severity: warning
          disabled: true
        - name: range
          severity: warning
          disabled: false
        - name: range-val-in-closure
          severity: warning
          disabled: false
        - name: range-val-address
          severity: warning
          disabled: false
        - name: receiver-naming
          severity: warning
          disabled: false
        - name: redefines-builtin-id
          severity: warning
          disabled: false
        - name: string-of-int
          severity: warning
          disabled: false
        - name: string-format
          arguments:
            - - core.WriteError[1].Message
              - /^([^A-Z]|$)/
              - must not start with a capital letter
            - - fmt.Errorf[0]
              - /(^|[^\.!?])$/
              - must not end in punctuation
            - - panic
              - /^[^\n]*$/
              - must not contain line breaks
          severity: warning
          disabled: false
        - name: struct-tag
          severity: warning
          disabled: false
        - name: superfluous-else
          severity: warning
          disabled: false
        - name: time-equal
          severity: warning
          disabled: false
        - name: time-naming
          severity: warning
          disabled: false
        - name: var-naming
          arguments:
            - - ID
            - - VM
            - - skip-initialism-name-checks: true
                upper-case-const: true
                skip-package-name-checks: true
                extra-bad-package-names:
                  - interfaces
          severity: warning
          disabled: false
        - name: var-declaration
          severity: warning
          disabled: false
        - name: unconditional-recursion
          severity: warning
          disabled: false
        - name: unexported-naming
          severity: warning
          disabled: false
        - name: unexported-return
          severity: warning
          disabled: false
        - name: unhandled-error
          arguments:
            - fmt.Print
            - fmt.Printf
            - fmt.Println
            - myFunction
          severity: warning
          disabled: false
        - name: unnecessary-stmt
          severity: warning
          disabled: false
        - name: unreachable-code
          severity: warning
          disabled: false
        - name: unused-parameter
          severity: warning
          disabled: false
        - name: unused-receiver
          severity: warning
          disabled: false
        - name: useless-break
          severity: warning
          disabled: false
        - name: waitgroup-by-value
          severity: warning
          disabled: false
    rowserrcheck:
      packages:
        - github.com/jmoiron/sqlx
    staticcheck:
      checks:
        - '*'
      initialisms:
        - ACL
        - API
        - ASCII
        - CPU
        - CSS
        - DNS
        - EOF
        - GUID
        - HTML
        - HTTP
        - HTTPS
        - ID
        - IP
        - JSON
        - QPS
        - RAM
        - RPC
        - SLA
        - SMTP
        - SQL
        - SSH
        - TCP
        - TLS
        - TTL
        - UDP
        - UI
        - GID
        - UID
        - UUID
        - URI
        - URL
        - UTF8
        - VM
        - XML
        - XMPP
        - XSRF
        - XSS
        - SIP
        - RTP
        - AMQP
        - DB
        - TS
      dot-import-whitelist:
        - fmt
      http-status-code-whitelist:
        - "200"
        - "400"
        - "404"
        - "500"
    tagalign:
      align: false
      sort: false
      order:
        - json
        - yaml
        - yml
        - toml
        - mapstructure
        - binding
        - validate
    tagliatelle:
      case:
        rules:
          avro: snake
          bson: camel
          json: camel
          mapstructure: kebab
          xml: camel
          yaml: camel
        use-field-name: true
    testpackage:
      skip-regexp: (export|internal)_test\.go
      allow-packages:
        - example
        - main
    thelper:
      test:
        first: true
        name: true
        begin: true
      fuzz:
        first: false
        name: false
        begin: false
      benchmark:
        first: true
        name: true
        begin: true
      tb:
        first: false
        name: false
        begin: false
    unparam:
      check-exported: false
    usestdlibvars:
      http-method: true
      http-status-code: true
      time-weekday: true
      time-month: true
      time-layout: true
      crypto-hash: true
      default-rpc-path: true
      sql-isolation-level: true
      tls-signature-scheme: true
      constant-kind: true
    varnamelen:
      max-distance: 5
      min-name-length: 3
      check-receiver: true
      check-return: false
      check-type-param: false
      ignore-names:
        - err
        - id
      ignore-type-assert-ok: true
      ignore-map-index-ok: false
      ignore-chan-recv-ok: false
      ignore-decls:
        - c echo.Context
        - t testing.T
        - f *foo.Bar
        - e error
        - i int
        - const C
        - T any
        - m map[string]int
    whitespace:
      multi-if: false
      multi-func: false
    wrapcheck:
      ignore-sigs:
        - .Errorf(
        - errors.New(
        - errors.Unwrap(
        - .Wrap(
        - .Wrapf(
        - .WithMessage(
        - .WithMessagef(
        - .WithStack(
        - .WrapError(
      ignore-sig-regexps:
        - \.New.*Error\(
      ignore-package-globs:
        - encoding/*
        - github.com/pkg/*
      ignore-interface-regexps:
        - ^(?i)c(?-i)ach(ing|e)
    wsl_v5:
    
      # Allow cuddling a variable if it's used first in the immediate following block,
      # even if the statement with the block doesn't use the variable.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#configuration
      # Default: true
      allow-first-in-block: true
      # Same as above,
      # but allows cuddling if the variable is used anywhere in the following (or nested) block.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#configuration
      # Default: false
      allow-whole-block: false
      # If a block contains more than this number of lines,
      # the branch statement needs to be separated by whitespace.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#configuration
      # Default: 2
      branch-max-lines: 2
      # If set to a non-negative number,
      # case blocks need to end with whitespace if exceeding this number
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#configuration
      # Default: 0
      case-max-lines: 0
      # Default checks to use.
      # Can be `all`, `none`, `default` or empty.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#checks-and-configuration
      # Default: ""
      default: all
      # Enabled checks.
      # Will be additive to any presets.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#checks-and-configuration
      # Default: []
      enable: []
      # Disable checks.
      # Will be subtractive to any preset.
      # https://github.com/bombsimon/wsl/tree/main?tab=readme-ov-file#checks-and-configuration
      # Default: []
      disable: []

  exclusions:
    generated: lax
    rules:
      - linters:
          - dupl
        source: // Noduplinspection
      - linters:
          - depguard
          - dupl
          - exhaustruct
          - funlen
          - gocognit
          - goconst
          - gosec
          - gocyclo
          - importas
          - lll
          - maintidx
          - mnd
          - revive
          - varnamelen
          - wrapcheck
        path: _test\.go
      - linters:
          - gocritic
        path: \.go
        text: hugeParam
      - linters:
          - gocritic
        text: 'unnecessaryDefer:'
      - linters:
          - lll
        source: '^//go:generate '
      - path: (.+)\.go$
        text: abcdef
      - linters:
          - asasalint
          - cyclop
        path: (.+)_test\.go
    paths:
      - vendor
      - third_party$
      - builtin$
      - examples$
issues:
  max-issues-per-linter: 0
  max-same-issues: 0
  uniq-by-line: true
  new: false
  fix: true
severity:
  default: info
formatters:
  enable:
    - gci
    - gofmt
    - gofumpt
    - goimports
  settings:
    gci:
      sections:
        - standard
        - default
        - prefix(dev.local/marcelloh/MHGoLib)
        - prefix(dev.local/marcelloh/SailboatCompanion)
      custom-order: true
    gofmt:
      simplify: true
      rewrite-rules:
        - pattern: interface{}
          replacement: any
        - pattern: a[b:len(a)]
          replacement: a[b:]
    gofumpt:
      extra-rules: false
    goimports:
      local-prefixes:
        - dev.local/marcelloh/SailboatCompanion
  exclusions:
    generated: lax
    paths:
      - vendor
      - third_party$
      - builtin$
      - examples$
